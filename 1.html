
<!-- 

  Author profileï¼š

  æ¬¢è¿æ‚¨æœ‹å‹ï¼Œæ„Ÿè°¢ä½ çš„è®¤å¯ï¼Œæˆ‘æ˜¯å‡ ä½•å¿ƒå‡‰
  CSDNåšå®¢ä¸“å®¶ã€å†…å®¹åˆä¼™äººã€æ–°æ˜Ÿè®¡åˆ’å¯¼å¸ˆï¼Œ
  VueæŠ€èƒ½æ ‘æ„å»ºè€…ã€é˜¿é‡Œäº‘ç¤¾åŒºä¸“å®¶åšä¸»ï¼Œ
  å‰ç«¯é¢†åŸŸä¼˜è´¨åˆ›ä½œè€…è‡´åŠ›äºæ–°æŠ€æœ¯çš„æ¨å¹¿ä¸ä¼˜ç§€æŠ€æœ¯çš„æ™®åŠã€‚

  å¯æä¾›ç®€å†ã€å°±ä¸šæŒ‡å¯¼æœåŠ¡

  CSDNåšå®¢ï¼šhttps://blog.csdn.net/JHXL_
  å…¬ä¼—å·ï¼š#å‡ ä½•å¿ƒå‡‰çš„æ ¸å¿ƒåœˆ
  
 -->

 <!DOCTYPE html>
 <html lang="en">
 
 <head>
   <meta charset="UTF-8">
   <meta http-equiv="X-UA-Compatible" content="IE=edge">
   <meta name="viewport" content="width=device-width, initial-scale=1.0">
   <title>å‡‰å“¥çš„ç®€æ˜“ç‰ˆè´ªåƒè›‡</title>
   <style>
     * {
       margin: 0;
       padding: 0;
       box-sizing: border-box;
     }
 
     p {
       text-align: center;
       font-size: 23px;
       font-weight: 600;
     }
 
     .gamBox {
       width: 500px;
       height: 500px;
       border: 10px solid #393c1b;
       margin: 20px auto;
       background-color: #b6b327;
       border-radius: 20px;
       display: flex;
       flex-direction: column;
       justify-content: space-around;
       align-items: center;
 
 
     }
 
     /* //ä¸‹æ–¹ç­‰çº§ã€å¾—åˆ†ç›’å­/ */
     .integral {
       width: 398px;
       height: 25px;
       display: flex;
       justify-content: space-between;
       font-size: 16px;
       font-family: "Trebuchet MS", "Lucida Sans Unicode", "Lucida Grande",
         "Lucida Sans", Arial, sans-serif;
       font-weight: 700;
     }
 
     /* //å±å¹•æ ·å¼ */
     .screen {
       width: 400px;
       height: 400px;
       border: 1px solid #000;
       position: relative;
 
 
 
     }
 
     /* //è›‡çš„æ ·å¼ */
     .snake .snake-head {
       width: 20px;
       height: 20px;
       border: 1px solid #4d7d2b;
       background-color: #000;
       position: absolute;
       top: 0;
       left: 0;
 
     }
 
     .snake span {
       font-size: 17px;
       position: absolute;
       left: -2.7px;
       top: -3px;
     }
 
     .snake-body>div {
       position: absolute;
       top: 0;
       left: 0;
       width: 20px;
       height: 20px;
       border: 1px solid #4d7d2b;
       background-color: #000;
     }
 
 
     /* //é£Ÿç‰©çš„æ ·å¼ */
 
     .food {
       width: 20px;
       height: 20px;
       font-size: 8px;
       text-align: left;
       position: absolute;
       top: 10px;
       left: 0;
 
     }
 
     .food span {
       font-size: 17px;
       position: absolute;
       left: -1.7px;
       top: -2px;
     }
   </style>
 </head>
 
 <body>
 
   <p>è´ªåƒè›‡</p>
   <div class="gamBox">
 
     <div class="screen">
       <div class="snake">
         <div class="snake-head">
 
           <span>ğŸ˜¡</span>
 
         </div>
         <div class="snake-body">
         </div>
       </div>
 
       <div class="food">
         <span>ğŸ·</span>
       </div>
     </div>
     <div class="integral">
       <div>ç­‰çº§ï¼ˆgradeï¼‰<span class="grade"></span></div>
       <div>åˆ†æ•°ï¼ˆscoreï¼‰<span class="score"></span></div>
     </div>
   </div>
 
 </body>
 
 <script>
 
 
   /***
    * å…¬ç”¨å˜é‡
    * @foundationNumber åŸºç¡€å€æ•°ï¼šç§»åŠ¨ã€é£Ÿç‰©éšæœºä½ç½®é‡çš„å€æ•°
    * @maxGrade æœ€å¤§çš„ç­‰çº§
    */
 
   const foundationNumber = 20
   const maxGrade = 10
 
 
 
   /***
    * é£Ÿç‰©ç›¸å…³
    */
   const randomNumber = (min, max) => {
     return Math.floor(Math.random() * (max - min)) + min
   }
   let foodSeat = {
     top: 20,
     left: 20
   }
   const changeFoodSeat = () => {
     foodSeat.top = randomNumber(0, 20) * foundationNumber
     foodSeat.left = randomNumber(0, 20) * foundationNumber
 
     document.querySelector('.food').style.cssText = 'left:' + foodSeat.left + 'px;top:' + foodSeat.top + 'px'
   }
 
 
   /***
    * ç­‰çº§ã€åˆ†æ•°ç›¸å…³
    */
   let register = {
     score: 0,
     grade: 1
   }
   const changeScore = () => {
     register.score++
     if (register.grade < 10) {
       register.grade = Math.ceil(register.score / 10)
     }
 
     document.querySelector('.grade').innerText = register.grade
     document.querySelector('.score').innerText = register.score
   }
 
 
   /***
    * è›‡ç›¸å…³
    */
 
   let direction = ''//ç§»åŠ¨æ–¹å‘
   let snakeLength = []
   let snakeSeat = {
     top: 0,
     left: 0
   }
   const handleWatchEnter = e => {
     let previousTop = snakeSeat.top
     let previousLeft = snakeSeat.left
     //é€šè¿‡ä¾¿åˆ©æ¯ä¸ªèº«ä½“éƒ¨åˆ†æ¥è¿›è¡Œç§»åŠ¨
     snakeLength.forEach((ele, index) => {
       let temporaryTop = ele.top
       let temporaryLeft = ele.left
       ele.top = previousTop
       ele.left = previousLeft
       previousTop = temporaryTop
       previousLeft = temporaryLeft
       document.querySelectorAll('.snake-body>div')[index].style.cssText = 
       'left:' + ele.left + 'px;top:' + ele.top + 'px'
     });
 
     switch (direction) {
       case 'ArrowUp':
         snakeSeat.top -= 20
         break;
       case 'ArrowLeft':
         snakeSeat.left -= 20
         break;
       case 'ArrowRight':
         snakeSeat.left += 20
         break;
       case 'ArrowDown':
         snakeSeat.top += 20
         break;
     }
 
 
     if (snakeSeat.top == foodSeat.top && snakeSeat.left == foodSeat.left) {
       changeScore()
       changeFoodSeat()
       snakeLength.push({
         top: previousTop,
         left: previousLeft
       })
 
       var div = document.createElement('div');
       div.style.left = previousLeft + 'px';
       div.style.top = previousTop + 'px';
       div.class = 'bodyItem'
 
 
       document.querySelector('.snake-body').appendChild(div)
 
     }
 
 
     if (snakeSeat.top < 0 || snakeSeat.left < 0 || snakeSeat.left > 380 || snakeSeat.top > 380) {
       alert('æ’å¢™èº«äº¡')
       snakeSeat.top = 0
       snakeSeat.left = 0
       direction = ''
       snakeLength = []
       init()
 
       return
     }
 
     let bodySeats = snakeLength.map(item => JSON.stringify(item))
 
     if ((bodySeats.indexOf(JSON.stringify({ top: snakeSeat.top, left: snakeSeat.left })) != -1)) {
       alert('æŠŠè‡ªå·±æ’æ­»äº†')
       snakeSeat.top = 0
       snakeSeat.left = 0
       snakeLength = []
       direction = ''
       init()
       return
     }
     document.querySelector('.snake-head').style.cssText = 'left:' + snakeSeat.left + 'px;top:' + snakeSeat.top + 'px'
     setTimeout(() => {
       handleWatchEnter()
     }, 400 - (register.grade - 1) * 15);
   }
 
 
 
 
   //å‡½æ•°èŠ‚æµ
   const throttle = (fn, wait) => {
     var timer = null;
     return function () {
       var _this = this;
       var args = arguments;
       if (!timer) {
         timer = setTimeout(function () {
           fn.apply(_this, args);
           timer = null;
         }, wait);
       }
     }
   }
 
 
   const init = () => {
 
     document.querySelector('.snake-head').style.cssText = 'left:' + 0 + 'px;top:' + 0 + 'px'
     document.querySelector('.snake-body').innerHTML = ""
     document.querySelector('.grade').innerText = register.grade
     document.querySelector('.score').innerText = register.score
     changeFoodSeat()
     handleWatchEnter()
   }
 
 
 
   document.addEventListener('keydown', (e) => {
 
     if ((e.code == 'ArrowUp' && direction != 'ArrowDown') || (e.code == 'ArrowLeft' && direction != 'ArrowRight') || (e.code == 'ArrowRight' && direction != 'ArrowLeft') || (e.code == 'ArrowDown' && direction != 'ArrowUp')) {
       direction = e.code
     }
   });
   init()
 
 </script>
 
 </html>
 